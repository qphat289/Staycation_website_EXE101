{% extends 'base.html' %}
{% block title %}Admin Dashboard{% endblock %}

{% block content %}
<div class="container py-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="fw-bold text-primary" data-translate="admin-dashboard">Quản trị viên</h2>
    <a href="{{ url_for('admin.create_owner') }}" class="btn btn-success" data-translate="create-owner">
      <i class="fas fa-plus me-2"></i>Tạo Chủ Nhà
    </a>
  </div>

  <div class="card shadow-sm mb-4">
    <div class="card-header bg-light">
      <h4 class="card-title mb-0" data-translate="all-owners">Danh Sách Chủ Nhà</h4>
    </div>
    <div class="card-body">
      <div class="table-responsive">
        <table class="table table-striped table-hover align-middle">
          <thead class="table-dark">
            <tr>
              <th data-translate="owner-id">ID Chủ Nhà</th>
              <th data-translate="username">Tên Đăng Nhập</th>
              <th data-translate="email">Email</th>
              <th data-translate="homestays">Homestay</th>
            </tr>
          </thead>
          <tbody>
            {% for owner in owners %}
            <tr>
              <td>{{ owner.id }}</td>
              <td>{{ owner.username }}</td>
              <td>{{ owner.email }}</td>
              <td>
                {% if owner.homestays %}
                  <div class="list-group">
                    {% for homestay in owner.homestays %}
                      <div class="d-flex justify-content-between align-items-center mb-2">
                        <strong>{{ homestay.title }}</strong>
                        <a href="{{ url_for('admin.homestay_details', homestay_id=homestay.id) }}" class="btn btn-outline-primary btn-sm">
                          <i class="fas fa-eye me-1"></i>Xem chi tiết
                        </a>
                      </div>
                    {% endfor %}
                  </div>
                {% else %}
                  <div class="alert alert-warning mb-0" data-translate="no-homestays">Chưa có homestay nào.</div>
                {% endif %}
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Kích hoạt tooltips nếu cần
    const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
    tooltipTriggerList.map(function (tooltipTriggerEl) {
      return new bootstrap.Tooltip(tooltipTriggerEl)
    });
  });
</script>
{% endblock %}