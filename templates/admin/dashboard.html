{% extends 'base.html' %}
{% block title %}Admin Dashboard{% endblock %}

{% block content %}
<h2 data-translate="admin-dashboard">Admin Dashboard</h2>
<!-- Button to create a new owner -->
<a href="{{ url_for('admin.create_owner') }}" class="btn btn-primary mb-3" data-translate="create-owner">Create Owner</a>

<hr>
<p data-translate="admin-only-area">This is an admin-only area.</p>

<!-- Table of all owners -->
<h3 data-translate="all-owners">All Owners</h3>
<table class="table table-bordered">
  <thead>
    <tr>
      <th data-translate="owner-id">Owner ID</th>
      <th data-translate="username">Username</th>
      <th data-translate="email">Email</th>
      <th data-translate="homestays">Homestays</th>
    </tr>
  </thead>
  <tbody>
    {% for owner in owners %}
    <tr>
      <td>{{ owner.id }}</td>
      <td>{{ owner.username }}</td>
      <td>{{ owner.email }}</td>
      <td>
        {% if owner.homestays %}
          <ul>
            {% for homestay in owner.homestays %}
              <li>
                <strong>{{ homestay.title }}</strong>
                <br>
                <em>{{ homestay.address }}, {{ homestay.city }}, {{ homestay.district }}</em>
                
                <!-- If you want to display rooms within each homestay -->
                {% if homestay.rooms %}
                  <ul>
                    {% for room in homestay.rooms %}
                      <li>
                        <span data-translate="room-number">Room #</span>{{ room.room_number }}:
                        {{ room.bed_count }} <span data-translate="beds">beds</span>, 
                        {{ room.bathroom_count }} <span data-translate="baths">baths</span>,
                        <span data-translate="price">Price</span>: {{ room.price_per_hour }}/hr
                      </li>
                    {% endfor %}
                  </ul>
                {% else %}
                  <em data-translate="no-rooms">No rooms yet.</em>
                {% endif %}
                
              </li>
            {% endfor %}
          </ul>
        {% else %}
          <em data-translate="no-homestays">No homestays yet.</em>
        {% endif %}
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}