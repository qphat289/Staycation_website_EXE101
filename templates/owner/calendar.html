<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lịch - Staycation</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #FDFBFA;
            margin: 0;
            padding: 0;
        }
        
        .container {
            display: flex;
            min-height: 100vh;
        }
        
        /* Sidebar */
        .sidebar {
            width: 213px;
            background-color: #FDFBFA;
            border-right: 0.5px solid #CCC8B4;
            padding: 0;
        }
        
        .sidebar-header {
            padding: 15px 65px;
            border-bottom: 0.5px solid #CCC8B4;
        }
        
        .sidebar-header h2 {
            font-size: 20px;
            font-weight: 600;
            color: #101917;
            margin: 0;
        }
        
        .sidebar-menu {
            padding: 50px 0;
        }
        
        .menu-item {
            display: flex;
            align-items: center;
            padding: 9px 75px;
            color: #7C7C7C;
            text-decoration: none;
            font-size: 12px;
            font-weight: 500;
            transition: all 0.3s ease;
            border-bottom: 0.5px solid #7C7C7C;
        }
        
        .menu-item:first-child {
            border-top: 0.5px solid #7C7C7C;
        }
        
        .menu-item i {
            width: 12px;
            height: 12px;
            margin-right: 21px;
            font-size: 10px;
        }
        
        .menu-item:hover,
        .menu-item.active {
            color: #101917;
            background-color: #E0EC9B;
            border-radius: 8px;
            margin: 0 10px;
            border: none;
        }
        
        .menu-item.active {
            color: #101917;
        }
        
        /* Main content */
        .main-content {
            flex: 1;
            padding: 40px 65px;
        }
        
        .content-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
        }
        
        .date-display {
            font-size: 16px;
            font-weight: 500;
            color: #000000;
        }
        
        .calendar-container {
            display: flex;
            gap: 20px;
        }
        
        /* Timeline */
        .timeline-container {
            flex: 1;
            background-color: #FDFBFA;
            border: 0.3px solid #7C7C7C;
            border-radius: 8px;
            padding: 0;
            height: 654px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        
        .timeline-header {
            background-color: #FDFBFA;
            border-bottom: 0.3px solid #7C7C7C;
            display: flex;
            overflow-x: auto;
            flex-shrink: 0;
        }
        
        .time-column-header {
            width: 80px;
            flex-shrink: 0;
            background-color: #FDFBFA;
            border-right: 0.2px solid #CCC8B4;
            text-align: center;
            padding: 15px 0;
            font-size: 12px;
            font-weight: 500;
            color: #101917;
        }
        
        .homestay-header {
            min-width: 200px;
            flex-shrink: 0;
            padding: 15px;
            text-align: center;
            border-right: 0.2px solid #CCC8B4;
            background-color: #FDFBFA;
        }
        
        .homestay-title {
            font-size: 12px;
            font-weight: 500;
            color: #101917;
            margin-bottom: 4px;
        }
        
        .homestay-info {
            font-size: 10px;
            color: #7C7C7C;
        }
        
        .timeline-body {
            flex: 1;
            overflow: auto;
            display: flex;
        }
        
        .time-labels {
            width: 80px;
            flex-shrink: 0;
            background-color: #FDFBFA;
            border-right: 0.2px solid #CCC8B4;
        }
        
        .time-label {
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 15px;
            font-size: 10px;
            color: #101917;
            font-weight: 400;
            border-bottom: 0.2px solid #CCC8B4;
        }
        
        .homestays-timeline {
            flex: 1;
            display: flex;
            overflow-x: auto;
        }
        
        .homestay-timeline {
            min-width: 200px;
            flex-shrink: 0;
            position: relative;
            border-right: 0.2px solid #CCC8B4;
            background-color: #FDFBFA;
        }
        
        .timeline-row {
            height: 50px;
            border-bottom: 0.2px solid #CCC8B4;
            position: relative;
        }
        
        .timeline-row:last-child {
            border-bottom: 0.3px solid #CCC8B4;
        }
        
        /* Booking Blocks */
        .booking-block {
            position: absolute;
            left: 10px;
            right: 10px;
            background-color: #E0EC9B;
            border-left: 5px solid #C3D600;
            border-radius: 4px;
            padding: 6px 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            z-index: 10;
            overflow: hidden;
        }
        
        .booking-block:hover {
            opacity: 0.8;
        }
        
        .booking-customer {
            font-size: 10px;
            font-weight: 400;
            color: #101917;
            margin-bottom: 2px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .booking-time {
            font-size: 10px;
            font-weight: 400;
            color: #7C7C7C;
            white-space: nowrap;
        }
        
        .booking-icon {
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            width: 10px;
            height: 10px;
            color: #7C7C7C;
            font-size: 8px;
        }
        
        /* Calendar widget */
        .calendar-widget {
            width: 310px;
            background-color: #FDFBFA;
            border: 0.3px solid #7C7C7C;
            border-radius: 8px;
            padding: 15px;
            height: fit-content;
        }
        
        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .calendar-title {
            font-size: 14px;
            font-weight: 500;
            color: #000000;
        }
        
        .calendar-nav {
            display: flex;
            gap: 10px;
        }
        
        .calendar-nav-btn {
            width: 20px;
            height: 20px;
            border: none;
            background: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #7C7C7C;
        }
        
        .calendar-nav-btn:hover {
            color: #101917;
        }
        
        .calendar-weekdays {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
            margin-bottom: 10px;
        }
        
        .calendar-weekday {
            text-align: center;
            font-size: 12px;
            font-weight: 500;
            color: #000000;
            padding: 5px;
        }
        
        .calendar-days {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
        }
        
        .calendar-day {
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: 400;
            color: #7C7C7C;
            cursor: pointer;
            border-radius: 50%;
            transition: all 0.3s ease;
        }
        
        .calendar-day.current-month {
            color: #101917;
        }
        
        .calendar-day.selected {
            background-color: #101917;
            color: #FDFBFA;
        }
        
        .calendar-day.today {
            border: 0.7px solid #101917;
        }
        
        .calendar-day:hover {
            background-color: #E0EC9B;
        }
        
        /* Current time indicator */
        .current-time-line {
            position: absolute;
            left: 0;
            right: 0;
            height: 0.3px;
            background-color: #CCC8B4;
            z-index: 20;
        }
        
        .current-time-dot {
            position: absolute;
            left: -3px;
            top: -3px;
            width: 6px;
            height: 6px;
            background-color: #D9D9D9;
            border-radius: 50%;
        }
        
        /* Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
        }
        
        .modal-content {
            background-color: #FDFBFA;
            margin: 5% auto;
            padding: 0;
            border-radius: 8px;
            width: 400px;
            max-width: 90%;
            box-shadow: 0px 1px 14px 2px rgba(12, 12, 13, 0.08);
        }
        
        .modal-header {
            padding: 20px 25px 15px;
            border-bottom: 1px solid #E0E0E0;
        }
        
        .modal-title {
            font-size: 12px;
            font-weight: 500;
            color: #101917;
            margin: 0;
            display: flex;
            align-items: center;
        }
        
        .modal-title i {
            margin-right: 10px;
            width: 10px;
            height: 10px;
        }
        
        .modal-body {
            padding: 20px 25px;
        }
        
        .modal-field {
            margin-bottom: 15px;
        }
        
        .modal-field:last-child {
            margin-bottom: 0;
        }
        
        .modal-field-label {
            font-size: 10px;
            font-weight: 400;
            color: #101917;
            margin-bottom: 5px;
        }
        
        .modal-field-value {
            font-size: 10px;
            font-weight: 400;
            color: #7C7C7C;
        }
        
        .close {
            position: absolute;
            right: 15px;
            top: 15px;
            color: #7C7C7C;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
        }
        
        .close:hover {
            color: #101917;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-header">
                <h2>Lịch</h2>
            </div>
            <nav class="sidebar-menu">
                <a href="{{ url_for('owner.profile') }}" class="menu-item">
                    <i class="fas fa-user"></i>
                    Tài khoản
                </a>
                <a href="{{ url_for('owner.statistics') }}" class="menu-item">
                    <i class="fas fa-chart-bar"></i>
                    Thống kê
                </a>
                <a href="{{ url_for('owner.calendar') }}" class="menu-item active">
                    <i class="fas fa-calendar"></i>
                    Lịch
                </a>
                <a href="{{ url_for('owner.dashboard') }}" class="menu-item">
                    <i class="fas fa-home"></i>
                    Tất cả phòng
                </a>
            </nav>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <div class="content-header">
                <div class="date-display">23 Tháng 5, 2025</div>
            </div>
            
            <div class="calendar-container">
                <!-- Timeline -->
                <div class="timeline-container">
                    <!-- Timeline Header -->
                    <div class="timeline-header">
                        <div class="time-column-header">Thời gian</div>
                        <div id="homestays-header">
                            <!-- Homestay headers will be generated by JavaScript -->
                        </div>
                    </div>
                    
                    <!-- Timeline Body -->
                    <div class="timeline-body">
                        <div class="time-labels" id="time-labels">
                            <!-- Time labels will be generated by JavaScript -->
                        </div>
                        <div class="homestays-timeline" id="homestays-timeline">
                            <!-- Homestay timelines will be generated by JavaScript -->
                        </div>
                    </div>
                </div>
                
                <!-- Calendar Widget -->
                <div class="calendar-widget">
                    <div class="calendar-header">
                        <div class="calendar-title">Tháng 5, 2025</div>
                        <div class="calendar-nav">
                            <button class="calendar-nav-btn" onclick="previousMonth()">
                                <i class="fas fa-chevron-left"></i>
                            </button>
                            <button class="calendar-nav-btn" onclick="nextMonth()">
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="calendar-weekdays">
                        <div class="calendar-weekday">S</div>
                        <div class="calendar-weekday">M</div>
                        <div class="calendar-weekday">T</div>
                        <div class="calendar-weekday">W</div>
                        <div class="calendar-weekday">T</div>
                        <div class="calendar-weekday">F</div>
                        <div class="calendar-weekday">S</div>
                    </div>
                    
                    <div class="calendar-days" id="calendarDays">
                        <!-- Calendar days will be generated by JavaScript -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Booking Detail Modal -->
    <div id="bookingModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <div class="modal-header">
                <h3 class="modal-title">
                    <i class="fas fa-calendar-check"></i>
                    Đơn đặt phòng
                </h3>
            </div>
            <div class="modal-body">
                <div class="modal-field">
                    <div class="modal-title">
                        <i class="fas fa-user"></i>
                        Khách hàng:
                    </div>
                </div>
                <div class="modal-field">
                    <div class="modal-field-label" id="modalCustomerName">Họ Tên: </div>
                </div>
                <div class="modal-field">
                    <div class="modal-field-label" id="modalPhone">Số điện thoại: </div>
                </div>
                <div class="modal-field">
                    <div class="modal-field-label" id="modalEmail">Email: </div>
                </div>
                <div class="modal-field">
                    <div class="modal-field-value" id="modalUsername">Username: </div>
                </div>
                
                <div class="modal-field">
                    <div class="modal-title">
                        <i class="fas fa-home"></i>
                        Phòng
                    </div>
                </div>
                
                <div class="modal-field">
                    <div class="modal-title">
                        <i class="fas fa-calendar-check"></i>
                        Đơn đặt phòng
                    </div>
                </div>
                <div class="modal-field">
                    <div class="modal-field-label" id="modalBookingDate">Đặt vào: </div>
                </div>
                <div class="modal-field">
                    <div class="modal-field-label" id="modalBookingType">Hình thức: </div>
                </div>
                <div class="modal-field">
                    <div class="modal-field-label" id="modalCheckin">Check-in: </div>
                </div>
                <div class="modal-field">
                    <div class="modal-field-label" id="modalCheckout">Check-out: </div>
                </div>
                <div class="modal-field">
                    <div class="modal-field-label" id="modalDuration">Khoảng thời gian: </div>
                </div>
                <div class="modal-field">
                    <div class="modal-field-label" id="modalTotal">Thanh toán tổng: </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Sample data - replace with real data from server
        const homestays = [
            { id: 1, title: 'Bonita Signature The View', type: 'Villa', city: 'Hồ Chí Minh' },
            { id: 2, title: 'Altar Palace', type: 'Homestay', city: 'Đà Nẵng' },
            { id: 3, title: 'Ấm Stay', type: 'Apartment', city: 'Hà Nội' },
            { id: 4, title: 'Sunset Villa', type: 'Villa', city: 'Nha Trang' }
        ];
        
        const bookings = [
            {
                id: 1,
                homestay_id: 1,
                customer_name: 'Nguyễn Văn Anh',
                phone: '0937931555',
                email: 'nguyenvananh@gmail.com',
                username: 'Van Anh',
                start_hour: 9,
                end_hour: 11,
                booking_date: '10:52, 29-5-2025',
                type: 'Theo giờ',
                checkin: '9:00',
                checkout: '11:00',
                duration: '2h',
                total: '400.000đ'
            },
            {
                id: 2,
                homestay_id: 2,
                customer_name: 'Cao Huy',
                phone: '0123456789',
                email: 'caohuy@gmail.com',
                username: 'Cao Huy',
                start_hour: 11,
                end_hour: 12,
                booking_date: '10:30, 29-5-2025',
                type: 'Theo giờ',
                checkin: '11:00',
                checkout: '12:00',
                duration: '1h',
                total: '200.000đ'
            },
            {
                id: 3,
                homestay_id: 3,
                customer_name: 'Trần Minh Bảo',
                phone: '0987654321',
                email: 'tranminhbao@gmail.com',
                username: 'Minh Bao',
                start_hour: 12,
                end_hour: 13.5,
                booking_date: '11:15, 29-5-2025',
                type: 'Theo giờ',
                checkin: '12:00',
                checkout: '13:30',
                duration: '1.5h',
                total: '300.000đ'
            },
            {
                id: 4,
                homestay_id: 3,
                customer_name: 'Cao Thị Kim Lan',
                phone: '0369852147',
                email: 'caothikimlan@gmail.com',
                username: 'Kim Lan',
                start_hour: 13,
                end_hour: 15,
                booking_date: '09:45, 29-5-2025',
                type: 'Theo giờ',
                checkin: '13:00',
                checkout: '15:00',
                duration: '2h',
                total: '400.000đ'
            }
        ];
        
        // Calendar functionality
        let currentDate = new Date(2025, 4, 23); // May 23, 2025
        
        function initializeCalendar() {
            generateTimeLabels();
            generateHomestayHeaders();
            generateHomestayTimelines();
            renderBookings();
            generateCalendar();
            updateCurrentTimeIndicator();
            
            // Update current time indicator every minute
            setInterval(updateCurrentTimeIndicator, 60000);
        }
        
        function generateTimeLabels() {
            const timeLabels = document.getElementById('time-labels');
            timeLabels.innerHTML = '';
            
            for (let hour = 0; hour < 24; hour++) {
                const timeLabel = document.createElement('div');
                timeLabel.className = 'time-label';
                timeLabel.textContent = `${hour.toString().padStart(2, '0')}:00`;
                timeLabels.appendChild(timeLabel);
            }
        }
        
        function generateHomestayHeaders() {
            const homestaysHeader = document.getElementById('homestays-header');
            homestaysHeader.innerHTML = '';
            
            homestays.forEach(homestay => {
                const homestayHeader = document.createElement('div');
                homestayHeader.className = 'homestay-header';
                homestayHeader.innerHTML = `
                    <div class="homestay-title">${homestay.title}</div>
                    <div class="homestay-info">${homestay.type} • ${homestay.city}</div>
                `;
                homestaysHeader.appendChild(homestayHeader);
            });
        }
        
        function generateHomestayTimelines() {
            const homestaysTimeline = document.getElementById('homestays-timeline');
            homestaysTimeline.innerHTML = '';
            
            homestays.forEach(homestay => {
                const homestayTimeline = document.createElement('div');
                homestayTimeline.className = 'homestay-timeline';
                homestayTimeline.setAttribute('data-homestay-id', homestay.id);
                
                // Create 24 hour rows for each homestay
                for (let hour = 0; hour < 24; hour++) {
                    const timelineRow = document.createElement('div');
                    timelineRow.className = 'timeline-row';
                    homestayTimeline.appendChild(timelineRow);
                }
                
                homestaysTimeline.appendChild(homestayTimeline);
            });
        }
        
        function renderBookings() {
            // Clear existing booking blocks
            const homestayTimelines = document.querySelectorAll('.homestay-timeline');
            homestayTimelines.forEach(timeline => {
                const existingBlocks = timeline.querySelectorAll('.booking-block');
                existingBlocks.forEach(block => block.remove());
            });
            
            bookings.forEach(booking => {
                const startHour = booking.start_hour;
                const endHour = booking.end_hour;
                
                // Calculate position (each hour = 50px)
                const startPosition = startHour * 50;
                const duration = (endHour - startHour) * 50;
                
                // Find the homestay timeline for this booking
                const homestayTimeline = document.querySelector(`[data-homestay-id="${booking.homestay_id}"]`);
                if (homestayTimeline) {
                    const blockElement = document.createElement('div');
                    blockElement.className = 'booking-block';
                    blockElement.style.top = `${startPosition}px`;
                    blockElement.style.height = `${Math.max(duration, 30)}px`;
                    
                    blockElement.innerHTML = `
                        <div class="booking-customer">${booking.customer_name}</div>
                        <div class="booking-time">${booking.checkin} - ${booking.checkout}</div>
                        <i class="fas fa-chevron-right booking-icon"></i>
                    `;
                    
                    blockElement.addEventListener('click', () => showBookingModal(booking));
                    
                    homestayTimeline.appendChild(blockElement);
                }
            });
        }
        
        function updateCurrentTimeIndicator() {
            const now = new Date();
            const currentHour = now.getHours();
            const currentMinute = now.getMinutes();
            
            // Remove existing time lines
            const existingLines = document.querySelectorAll('.current-time-line');
            existingLines.forEach(line => line.remove());
            
            // Calculate position (each hour = 50px)
            const position = (currentHour + currentMinute / 60) * 50;
            
            // Add time line to each homestay timeline
            const homestayTimelines = document.querySelectorAll('.homestay-timeline');
            homestayTimelines.forEach(timeline => {
                const timeLine = document.createElement('div');
                timeLine.className = 'current-time-line';
                timeLine.style.top = `${position}px`;
                
                const timeDot = document.createElement('div');
                timeDot.className = 'current-time-dot';
                timeLine.appendChild(timeDot);
                
                timeline.appendChild(timeLine);
            });
        }
        
        function generateCalendar() {
            const calendarDays = document.getElementById('calendarDays');
            calendarDays.innerHTML = '';
            
            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();
            
            // Get first day of month and number of days
            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            const daysInMonth = lastDay.getDate();
            const startingDayOfWeek = firstDay.getDay();
            
            // Add empty cells for days before month starts
            for (let i = 0; i < startingDayOfWeek; i++) {
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day';
                dayElement.textContent = new Date(year, month, -startingDayOfWeek + i + 1).getDate();
                calendarDays.appendChild(dayElement);
            }
            
            // Add days of current month
            for (let day = 1; day <= daysInMonth; day++) {
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day current-month';
                dayElement.textContent = day;
                
                // Mark selected day (23rd)
                if (day === 23) {
                    dayElement.classList.add('selected');
                }
                
                // Mark today (22nd with circle)
                if (day === 22) {
                    dayElement.classList.add('today');
                }
                
                dayElement.addEventListener('click', function() {
                    document.querySelectorAll('.calendar-day.selected').forEach(el => {
                        el.classList.remove('selected');
                    });
                    this.classList.add('selected');
                    
                    // Update date display
                    document.querySelector('.date-display').textContent = 
                        `${day} Tháng ${month + 1}, ${year}`;
                });
                
                calendarDays.appendChild(dayElement);
            }
            
            // Add empty cells for days after month ends
            const totalCells = calendarDays.children.length;
            const remainingCells = 42 - totalCells; // 6 rows × 7 days
            for (let i = 1; i <= remainingCells; i++) {
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day';
                dayElement.textContent = i;
                calendarDays.appendChild(dayElement);
            }
        }
        
        function previousMonth() {
            currentDate.setMonth(currentDate.getMonth() - 1);
            updateCalendarTitle();
            generateCalendar();
        }
        
        function nextMonth() {
            currentDate.setMonth(currentDate.getMonth() + 1);
            updateCalendarTitle();
            generateCalendar();
        }
        
        function updateCalendarTitle() {
            const monthNames = [
                'Tháng 1', 'Tháng 2', 'Tháng 3', 'Tháng 4', 'Tháng 5', 'Tháng 6',
                'Tháng 7', 'Tháng 8', 'Tháng 9', 'Tháng 10', 'Tháng 11', 'Tháng 12'
            ];
            document.querySelector('.calendar-title').textContent = 
                `${monthNames[currentDate.getMonth()]}, ${currentDate.getFullYear()}`;
        }
        
        // Modal functionality
        function showBookingModal(booking) {
            document.getElementById('modalCustomerName').textContent = 'Họ Tên: ' + booking.customer_name;
            document.getElementById('modalPhone').textContent = 'Số điện thoại: ' + booking.phone;
            document.getElementById('modalEmail').textContent = 'Email: ' + booking.email;
            document.getElementById('modalUsername').textContent = 'Username: ' + booking.username;
            document.getElementById('modalBookingDate').textContent = 'Đặt vào: ' + booking.booking_date;
            document.getElementById('modalBookingType').textContent = 'Hình thức: ' + booking.type;
            document.getElementById('modalCheckin').textContent = 'Check-in: ' + booking.checkin;
            document.getElementById('modalCheckout').textContent = 'Check-out: ' + booking.checkout;
            document.getElementById('modalDuration').textContent = 'Khoảng thời gian: ' + booking.duration;
            document.getElementById('modalTotal').textContent = 'Thanh toán tổng: ' + booking.total;
            
            document.getElementById('bookingModal').style.display = 'block';
        }
        
        function closeModal() {
            document.getElementById('bookingModal').style.display = 'none';
        }
        
        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('bookingModal');
            if (event.target === modal) {
                modal.style.display = 'none';
            }
        }
        
        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', initializeCalendar);
    </script>
</body>
</html>