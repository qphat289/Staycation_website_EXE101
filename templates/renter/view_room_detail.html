{% extends 'base.html' %}
{% block title %}<span data-translate="room">Room</span> {{ room.room_number }} <span data-translate="description">Details</span>{% endblock %}

{% block content %}
<div class="container my-4">
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{{ url_for('home') }}" data-translate="home">Home</a></li>
            <li class="breadcrumb-item"><a href="{{ url_for('renter.view_homestay', id=room.homestay.id) }}">{{ room.homestay.title }}</a></li>
            <li class="breadcrumb-item active"><span data-translate="room">Room</span> {{ room.room_number }}</li>
        </ol>
    </nav>

    <div class="row g-4">
        <!-- Left column: Gallery -->
        <div class="col-md-7 mb-4">
            <div class="card shadow-sm">
                <div class="card-header" style="background-color: #e2b77b; color: white;">
                    <h3 class="card-title mb-0"><span data-translate="room">Room</span> {{ room.room_number }}</h3>
                </div>
                
                <!-- Main Gallery Display -->
                <div class="card-body p-0">
                    <div class="main-image-container position-relative">
                        {% if room.images %}
                            {% set featured_image = room.images|selectattr('is_featured', 'equalto', True)|list|first %}
                            
                            <img id="mainImage" src="{{ url_for('static', filename=featured_image.image_path if featured_image else room.images[0].image_path) }}" 
                                class="img-fluid w-100" alt="Room {{ room.room_number }}">
                            
                            <!-- Image navigation arrows -->
                            {% if room.images|length > 1 %}
                                <div class="position-absolute top-50 start-0 translate-middle-y arrow-left" onclick="prevImage()"></div>
                                <div class="position-absolute top-50 end-0 translate-middle-y arrow-right" onclick="nextImage()"></div>
                            {% endif %}
                            
                            <!-- Fullscreen button -->
                            <div class="position-absolute bottom-0 end-0 m-3">
                                <button class="btn btn-sm btn-light d-flex align-items-center" onclick="openFullscreen()">
                                    <i class="bi bi-fullscreen me-1"></i> <span data-translate="photos">Gallery</span>
                                </button>
                            </div>
                        {% else %}
                            <div class="d-flex justify-content-center align-items-center bg-light empty-gallery">
                                <p class="text-muted" data-translate="no-images">No images available for this room</p>
                            </div>
                        {% endif %}
                    </div>
                    

                </div>
            </div>
            
            <!-- Location Card - Below Gallery -->
            {% if room.homestay.address %}
            <div class="card shadow-sm mt-4">
                <div class="card-header" style="background-color: #e2b77b; color: white;">
                    <h3 class="card-title mb-0" data-translate="location">Location</h3>
                </div>
                <div class="card-body">
                    <div class="d-flex align-items-center mb-3">
                        <i class="bi bi-geo-alt-fill text-primary me-2" style="font-size: 1.5rem;"></i>
                        <div>
                            <h5 class="mb-1">{{ room.homestay.title }}</h5>
                            <p class="mb-0">{{ room.homestay.address }}, {{ room.homestay.district }}, {{ room.homestay.city }}</p>
                        </div>
                    </div>
                    
                    {% set map_address = room.homestay.address + ', ' + room.homestay.district + ', ' + room.homestay.city + ', Vietnam' %}
                    {% set encoded_map_address = map_address|urlencode %}
                    {% set directions_url = 'https://www.google.com/maps/search/?api=1&query=' + encoded_map_address %}
                    
                    <a href="{{ directions_url }}" 
                    class="btn btn-primary d-block" 
                    target="_blank"
                    data-translate="view-on-map">
                        <i class="bi bi-map me-2"></i> View on Google Maps
                    </a>
                </div>
            </div>
        </div>
        {% endif %}

        <!-- Right column: Room details -->
        <div class="col-md-5">
            <div class="card shadow-sm mb-4">
                <div class="card-header py-3" style="background-color: #e2b77b; color: white;">
                    <h4 class="card-title mb-0 d-flex align-items-center">
                        <i class="bi bi-info-circle me-2"></i>
                        <span>Thông tin phòng</span>
                    </h4>
                </div>
                <div class="card-body p-4">
                    <div class="row g-4">
                        <!-- Giá mỗi giờ -->
                        <div class="col-6">
                            <div class="bg-light rounded-3 p-3 h-100">
                                <div class="text-muted small mb-1">Giá mỗi giờ</div>
                                <div class="h5 mb-0 text-primary">${{ "{:,.1f}".format(room.price_per_hour) }}</div>
                            </div>
                        </div>
                        
                        <!-- Số khách tối đa -->
                        <div class="col-6">
                            <div class="bg-light rounded-3 p-3 h-100">
                                <div class="text-muted small mb-1">Số khách tối đa</div>
                                <div class="h5 mb-0">{{ room.max_guests }} <i class="bi bi-people"></i></div>
                            </div>
                        </div>
                        
                        <!-- Giường -->
                        <div class="col-6">
                            <div class="bg-light rounded-3 p-3 h-100">
                                <div class="text-muted small mb-1">Giường</div>
                                <div class="h5 mb-0">{{ room.bed_count }} <i class="bi bi-house-door"></i></div>
                            </div>
                        </div>
                        
                        <!-- Phòng tắm -->
                        <div class="col-6">
                            <div class="bg-light rounded-3 p-3 h-100">
                                <div class="text-muted small mb-1">Phòng tắm</div>
                                <div class="h5 mb-0">{{ room.bathroom_count }} <i class="bi bi-droplet"></i></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Hiển thị tiện nghi phòng -->
                    <hr>
                    <div class="mb-3">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <h5 class="fw-bold mb-0" data-translate="amenities">Tiện nghi</h5>
                            <button class="btn btn-link text-decoration-none p-0" data-bs-toggle="modal" data-bs-target="#amenitiesModal">
                                Xem tất cả <i class="bi bi-chevron-right ms-1"></i>
                            </button>
                        </div>
                        
                        {% if '|AMENITIES|' in room.description %}
                            {% set description_parts = room.description.split('|AMENITIES|') %}
                            {% set user_description = description_parts[0]|trim %}
                            {% set amenities_part = description_parts[1]|trim %}
                            {% set amenities_list = amenities_part.split('|') %}
                            
                            {% if amenities_list %}
                                <div class="amenity-list bg-light rounded-3">
                                    <!-- Tiện nghi phổ biến -->
                                    <div class="p-3 border-bottom">
                                        <h6 class="mb-2 d-flex align-items-center">
                                            <i class="bi bi-stars me-2 text-primary"></i>
                                            <span>Tiện nghi phổ biến</span>
                                        </h6>
                                        <div class="row row-cols-2 g-3">
                                            {% set common_amenities = [] %}
                                            {% for amenity in amenities_list %}
                                                {% if ('Wifi tốc độ cao' in amenity or 'Netflix' in amenity or 'Điều hòa' in amenity 
                                                    or 'Máy pha cà phê' in amenity or 'Dịch vụ lưu trú' in amenity or 'Quầy lễ tân' in amenity 
                                                    or 'Dịch vụ giặt ủi' in amenity or 'Bãi đậu xe' in amenity or 'Lễ tân 24h' in amenity 
                                                    or 'Có ăn sáng' in amenity or 'Đưa đón sân bay' in amenity or 'Nhận phòng sớm' in amenity) %}
                                                    {% if common_amenities|length < 2 %}
                                                        {% set _ = common_amenities.append(amenity) %}
                                                        <div class="col">
                                                            <div class="d-flex align-items-center">
                                                                {% if 'Wifi' in amenity %}
                                                                    <i class="bi bi-wifi me-2 text-primary"></i>
                                                                {% elif 'Netflix' in amenity %}
                                <i class="bi bi-tv me-2 text-primary"></i>
                                                                {% elif 'Điều hòa' in amenity %}
                                                                    <i class="bi bi-snow me-2 text-primary"></i>
                                                                {% elif 'cà phê' in amenity %}
                                                                    <i class="bi bi-cup-hot me-2 text-primary"></i>
                                                                {% elif 'lưu trú' in amenity %}
                                                                    <i class="bi bi-house me-2 text-primary"></i>
                                                                {% elif 'lễ tân' in amenity %}
                                                                    <i class="bi bi-person-workspace me-2 text-primary"></i>
                                                                {% elif 'giặt' in amenity %}
                                                                    <i class="bi bi-basket me-2 text-primary"></i>
                                                                {% elif 'đậu xe' in amenity %}
                                                                    <i class="bi bi-p-square me-2 text-primary"></i>
                                                                {% elif 'Lễ tân 24h' in amenity %}
                                                                    <i class="bi bi-clock me-2 text-primary"></i>
                                                                {% elif 'ăn sáng' in amenity %}
                                                                    <i class="bi bi-egg-fried me-2 text-primary"></i>
                                                                {% elif 'sân bay' in amenity %}
                                                                    <i class="bi bi-airplane me-2 text-primary"></i>
                                                                {% elif 'Nhận phòng sớm' in amenity %}
                                                                    <i class="bi bi-door-open me-2 text-primary"></i>
                                                                {% endif %}
                                                                <span>{{ amenity }}</span>
                                                            </div>
                            </div>
                            {% endif %}
                                                {% endif %}
                                            {% endfor %}
                                        </div>
                                    </div>

                                    <!-- Tiện nghi phòng -->
                                    <div class="p-3 border-bottom">
                                        <h6 class="mb-2 d-flex align-items-center">
                                            <i class="bi bi-house-door me-2 text-primary"></i>
                                            <span>Tiện nghi phòng</span>
                                        </h6>
                                        <div class="row row-cols-2 g-3">
                                            {% set room_amenities = [] %}
                                            {% for amenity in amenities_list %}
                                                {% if ('Máy sấy tóc' in amenity or 'Phòng gia đình' in amenity or 'Khu vực hút thuốc' in amenity 
                                                    or 'Tủ lạnh' in amenity or 'Bồn tắm' in amenity or 'Nhà bếp' in amenity 
                                                    or 'Phòng liền thông' in amenity or 'Máy sưởi' in amenity or 'Ổ cắm' in amenity)
                                                    and not ('Wifi tốc độ cao' in amenity or 'Netflix' in amenity or 'Điều hòa' in amenity 
                                                    or 'Máy pha cà phê' in amenity or 'Dịch vụ lưu trú' in amenity or 'Quầy lễ tân' in amenity 
                                                    or 'Dịch vụ giặt ủi' in amenity or 'Bãi đậu xe' in amenity or 'Lễ tân 24h' in amenity 
                                                    or 'Có ăn sáng' in amenity or 'Đưa đón sân bay' in amenity or 'Nhận phòng sớm' in amenity) %}
                                                    {% if room_amenities|length < 2 %}
                                                        {% set _ = room_amenities.append(amenity) %}
                                                        <div class="col">
                                                            <div class="d-flex align-items-center">
                                                                {% if 'sấy tóc' in amenity %}
                                                                    <i class="bi bi-wind me-2 text-primary"></i>
                                                                {% elif 'gia đình' in amenity %}
                                                                    <i class="bi bi-people me-2 text-primary"></i>
                                                                {% elif 'hút thuốc' in amenity %}
                                                                    <i class="bi bi-slash-circle me-2 text-primary"></i>
                                                                {% elif 'Tủ lạnh' in amenity %}
                                                                    <i class="bi bi-thermometer-snow me-2 text-primary"></i>
                                                                {% elif 'Bồn tắm' in amenity %}
                                                                    <i class="bi bi-droplet me-2 text-primary"></i>
                                                                {% elif 'bếp' in amenity %}
                                                                    <i class="bi bi-fire me-2 text-primary"></i>
                                                                {% elif 'liền thông' in amenity %}
                                                                    <i class="bi bi-door-open-fill me-2 text-primary"></i>
                                                                {% elif 'sưởi' in amenity %}
                                                                    <i class="bi bi-thermometer-high me-2 text-primary"></i>
                                                                {% elif 'cắm' in amenity %}
                                                                    <i class="bi bi-plug me-2 text-primary"></i>
                                                                {% endif %}
                                                                <span>{{ amenity }}</span>
                                                            </div>
                            </div>
                            {% endif %}
                                                {% endif %}
                                            {% endfor %}
                                        </div>
                                    </div>

                                    <!-- Tiện nghi độc đáo -->
                                    <div class="p-3">
                                        <h6 class="mb-2 d-flex align-items-center">
                                            <i class="bi bi-star me-2 text-primary"></i>
                                            <span>Tiện nghi độc đáo</span>
                                        </h6>
                                        <div class="row row-cols-2 g-3">
                                            {% set unique_amenities = [] %}
                                            {% for amenity in amenities_list %}
                                                {% if ('View đẹp' in amenity or 'Loa bluetooth' in amenity or 'Khu vực giải trí' in amenity 
                                                    or 'Bar & Pub' in amenity or 'Chơi golf' in amenity or 'Thể thao trong nhà' in amenity 
                                                    or 'Đánh tennis' in amenity or 'Nhà máy rượu vang' in amenity or 'Khu vực mua sắm' in amenity)
                                                    and not ('Wifi tốc độ cao' in amenity or 'Netflix' in amenity or 'Điều hòa' in amenity 
                                                    or 'Máy pha cà phê' in amenity or 'Dịch vụ lưu trú' in amenity or 'Quầy lễ tân' in amenity 
                                                    or 'Dịch vụ giặt ủi' in amenity or 'Bãi đậu xe' in amenity or 'Lễ tân 24h' in amenity 
                                                    or 'Có ăn sáng' in amenity or 'Đưa đón sân bay' in amenity or 'Nhận phòng sớm' in amenity)
                                                    and not ('Máy sấy tóc' in amenity or 'Phòng gia đình' in amenity or 'Khu vực hút thuốc' in amenity 
                                                    or 'Tủ lạnh' in amenity or 'Bồn tắm' in amenity or 'Nhà bếp' in amenity 
                                                    or 'Phòng liền thông' in amenity or 'Máy sưởi' in amenity or 'Ổ cắm' in amenity) %}
                                                    {% if unique_amenities|length < 2 %}
                                                        {% set _ = unique_amenities.append(amenity) %}
                                                        <div class="col">
                                                            <div class="d-flex align-items-center">
                                                                {% if 'View' in amenity %}
                                                                    <i class="bi bi-view-stacked me-2 text-primary"></i>
                                                                {% elif 'Loa' in amenity %}
                                                                    <i class="bi bi-music-note-beamed me-2 text-primary"></i>
                                                                {% elif 'giải trí' in amenity %}
                                                                    <i class="bi bi-controller me-2 text-primary"></i>
                                                                {% elif 'Bar' in amenity %}
                                                                    <i class="bi bi-cup-straw me-2 text-primary"></i>
                                                                {% elif 'golf' in amenity %}
                                                                    <i class="bi bi-bullseye me-2 text-primary"></i>
                                                                {% elif 'thể thao' in amenity %}
                                                                    <i class="bi bi-activity me-2 text-primary"></i>
                                                                {% elif 'tennis' in amenity %}
                                                                    <i class="bi bi-circle me-2 text-primary"></i>
                                                                {% elif 'rượu' in amenity %}
                                                                    <i class="bi bi-wine-glass me-2 text-primary"></i>
                                                                {% elif 'mua sắm' in amenity %}
                                                                    <i class="bi bi-bag me-2 text-primary"></i>
                                                                {% endif %}
                                                                <span>{{ amenity }}</span>
                                                            </div>
                            </div>
                            {% endif %}
                                                {% endif %}
                                            {% endfor %}
                                        </div>
                                    </div>
                                </div>
                            {% else %}
                                <div class="col-12 mt-3">
                                    <p class="text-muted fst-italic small" data-translate="no-amenities-info">Chưa có thông tin tiện nghi.</p>
                            </div>
                            {% endif %}
                        {% else %}
                            <div class="col-12 mt-3">
                                <p class="text-muted fst-italic small" data-translate="no-amenities-info">Chưa có thông tin tiện nghi.</p>
                            </div>
                            {% endif %}
                    </div>
                    <hr>
                    <h5 data-translate="description">Description</h5>
                    <p>{% if room.description and room.description != '1' %}
                    {% if '|AMENITIES|' in room.description %}
                        {% set description_parts = room.description.split('|AMENITIES|') %}
                        {% set user_description = description_parts[0]|trim %}
                        {% if user_description %}
                            {{ user_description }}
                        {% else %}
                            <span class="text-muted fst-italic">Chưa có mô tả chi tiết</span>
                        {% endif %}
                    {% else %}
                        {{ room.description }}
                    {% endif %}
                {% else %}
                    <span class="text-muted fst-italic">Chưa có mô tả chi tiết</span>
                {% endif %}</p>
                    
                    <div class="d-grid gap-2 mt-4">
                        <a href="{{ url_for('renter.book_homestay', homestay_id=room.homestay.id) }}" class="btn btn-lg btn-primary">
                            <i class="bi bi-calendar-check"></i> <span data-translate="book-room">Book This Room</span>
                        </a>
                        <a href="{{ url_for('renter.view_homestay', id=room.homestay.id) }}" class="btn btn-outline-secondary">
                            <i class="bi bi-arrow-left"></i> <span data-translate="back-to-homestay">Back to Homestay</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- ✅ Khối JavaScript đã tách Jinja -->
<!-- Fullscreen Modal for Gallery -->
<div class="modal fade" id="imageModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-fullscreen">
        <div class="modal-content bg-dark">
            <div class="modal-header border-0">
                <h5 class="modal-title text-white">{{ room.homestay.title }} - <span data-translate="room">Room</span> {{ room.room_number }}</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body d-flex align-items-center justify-content-center p-0">
                <img id="fullscreenImage" class="img-fluid" style="max-height: 90vh;" src="" alt="{{ room.homestay.title }} - Room {{ room.room_number }}">
                
                {% if room.images and room.images|length > 1 %}
                <div class="position-absolute start-0 top-50 translate-middle-y p-3">
                    <button class="btn btn-light rounded-circle" onclick="prevFullscreenImage()">
                        <i class="bi bi-chevron-left"></i>
                    </button>
                </div>
                <div class="position-absolute end-0 top-50 translate-middle-y p-3">
                    <button class="btn btn-light rounded-circle" onclick="nextFullscreenImage()">
                        <i class="bi bi-chevron-right"></i>
                    </button>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<!-- JavaScript for Gallery -->
{% if room.images and room.images|length > 0 %}
<script>
    var galleryImages = {{ room.images | map(attribute='image_path') | list | tojson }};
    var currentImageIndex = 0;

    document.addEventListener('DOMContentLoaded', function() {
        var mainImage = document.getElementById('mainImage');
        var thumbnails = document.querySelectorAll('.thumbnail-img');
        var fullscreenImage = document.getElementById('fullscreenImage');

        window.showImage = function(index) {
            currentImageIndex = index;
            mainImage.src = "{{ url_for('static', filename='') }}" + galleryImages[index];
            
            // Cập nhật class "active" cho thumbnail
            // Update "active" class for thumbnail
            thumbnails.forEach(thumb => thumb.classList.remove('active'));
            thumbnails[index].classList.add('active');
        };

        window.nextImage = function() {
            currentImageIndex = (currentImageIndex + 1) % galleryImages.length;
            showImage(currentImageIndex);
        };

        window.prevImage = function() {
            currentImageIndex = (currentImageIndex - 1 + galleryImages.length) % galleryImages.length;
            showImage(currentImageIndex);
        };

        window.openFullscreen = function() {
            var fullscreenImage = document.getElementById('fullscreenImage');
            if (fullscreenImage) {
                fullscreenImage.src = "{{ url_for('static', filename='') }}" + galleryImages[currentImageIndex];
            }
            var imageModal = new bootstrap.Modal(document.getElementById('imageModal'));
            imageModal.show();
        };
        
        // Add fullscreen navigation
        window.nextFullscreenImage = function() {
            currentImageIndex = (currentImageIndex + 1) % galleryImages.length;
            fullscreenImage.src = "{{ url_for('static', filename='') }}" + galleryImages[currentImageIndex];
        };
        
        window.prevFullscreenImage = function() {
            currentImageIndex = (currentImageIndex - 1 + galleryImages.length) % galleryImages.length;
            fullscreenImage.src = "{{ url_for('static', filename='') }}" + galleryImages[currentImageIndex];
        };
        
        // Add keyboard navigation
        document.addEventListener('keydown', function(e) {
            if (document.querySelector('.modal.show')) {
                // Modal is open
                if (e.key === 'ArrowRight') {
                    nextFullscreenImage();
                } else if (e.key === 'ArrowLeft') {
                    prevFullscreenImage();
                } else if (e.key === 'Escape') {
                    document.querySelector('.modal.show .btn-close').click();
                }
            }
        });
    });
</script>
{% endif %}

<!-- Modal Hiển thị chi tiết tiện nghi -->
<div class="modal fade" id="amenitiesModal" tabindex="-1" aria-labelledby="amenitiesModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="amenitiesModalLabel"><i class="bi bi-stars me-2 text-primary"></i>Tiện nghi phòng</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                {% if '|AMENITIES|' in room.description %}
                    {% set description_parts = room.description.split('|AMENITIES|') %}
                    {% set amenities_part = description_parts[1]|trim %}
                    {% set amenities_list = amenities_part.split('|') %}
                    
                    <!-- Tiện nghi phổ biến -->
                    <div class="mb-3">
                        <h6 class="mb-2 d-flex align-items-center border-bottom pb-2">
                            <i class="bi bi-building me-2 text-primary"></i> Tiện nghi phổ biến
                        </h6>
                        <div class="row row-cols-2 g-2">
                            {% for amenity in amenities_list %}
                                {% if 'Wifi tốc độ cao' in amenity or 'Netflix' in amenity or 'Điều hòa' in amenity 
                                    or 'Máy pha cà phê' in amenity or 'Dịch vụ lưu trú' in amenity or 'Quầy lễ tân' in amenity 
                                    or 'Dịch vụ giặt ủi' in amenity or 'Bãi đậu xe' in amenity or 'Lễ tân 24h' in amenity 
                                    or 'Có ăn sáng' in amenity or 'Đưa đón sân bay' in amenity or 'Nhận phòng sớm' in amenity %}
                                    <div class="col">
                                        <div class="d-flex align-items-center">
                                            {% if 'Wifi' in amenity %}
                                                <i class="bi bi-wifi me-2 text-primary"></i>
                                            {% elif 'Netflix' in amenity %}
                                                <i class="bi bi-tv me-2 text-primary"></i>
                                            {% elif 'Điều hòa' in amenity %}
                                                <i class="bi bi-snow me-2 text-primary"></i>
                                            {% elif 'cà phê' in amenity %}
                                                <i class="bi bi-cup-hot me-2 text-primary"></i>
                                            {% elif 'lưu trú' in amenity %}
                                                <i class="bi bi-house me-2 text-primary"></i>
                                            {% elif 'lễ tân' in amenity %}
                                                <i class="bi bi-person-workspace me-2 text-primary"></i>
                                            {% elif 'giặt' in amenity %}
                                                <i class="bi bi-basket me-2 text-primary"></i>
                                            {% elif 'đậu xe' in amenity %}
                                                <i class="bi bi-p-square me-2 text-primary"></i>
                                            {% elif 'Lễ tân 24h' in amenity %}
                                                <i class="bi bi-clock me-2 text-primary"></i>
                                            {% elif 'ăn sáng' in amenity %}
                                                <i class="bi bi-egg-fried me-2 text-primary"></i>
                                            {% elif 'sân bay' in amenity %}
                                                <i class="bi bi-airplane me-2 text-primary"></i>
                                            {% elif 'Nhận phòng sớm' in amenity %}
                                                <i class="bi bi-door-open me-2 text-primary"></i>
                                            {% endif %}
                                            <span>{{ amenity }}</span>
                                        </div>
                                    </div>
                                {% endif %}
                            {% endfor %}
                        </div>
                    </div>

                    <!-- Tiện nghi phòng -->
                    <div class="mb-3">
                        <h6 class="mb-2 d-flex align-items-center border-bottom pb-2">
                            <i class="bi bi-house-door me-2 text-primary"></i> Tiện nghi phòng
                        </h6>
                        <div class="row row-cols-2 g-2">
                            {% for amenity in amenities_list %}
                                {% if ('Máy sấy tóc' in amenity or 'Phòng gia đình' in amenity or 'Khu vực hút thuốc' in amenity 
                                    or 'Tủ lạnh' in amenity or 'Bồn tắm' in amenity or 'Nhà bếp' in amenity 
                                    or 'Phòng liền thông' in amenity or 'Máy sưởi' in amenity or 'Ổ cắm' in amenity)
                                    and not ('Wifi tốc độ cao' in amenity or 'Netflix' in amenity or 'Điều hòa' in amenity 
                                    or 'Máy pha cà phê' in amenity or 'Dịch vụ lưu trú' in amenity or 'Quầy lễ tân' in amenity 
                                    or 'Dịch vụ giặt ủi' in amenity or 'Bãi đậu xe' in amenity or 'Lễ tân 24h' in amenity 
                                    or 'Có ăn sáng' in amenity or 'Đưa đón sân bay' in amenity or 'Nhận phòng sớm' in amenity) %}
                                    <div class="col">
                                        <div class="d-flex align-items-center">
                                            {% if 'sấy tóc' in amenity %}
                                                <i class="bi bi-wind me-2 text-primary"></i>
                                            {% elif 'gia đình' in amenity %}
                                                <i class="bi bi-people me-2 text-primary"></i>
                                            {% elif 'hút thuốc' in amenity %}
                                                <i class="bi bi-slash-circle me-2 text-primary"></i>
                                            {% elif 'Tủ lạnh' in amenity %}
                                                <i class="bi bi-thermometer-snow me-2 text-primary"></i>
                                            {% elif 'Bồn tắm' in amenity %}
                                                <i class="bi bi-droplet me-2 text-primary"></i>
                                            {% elif 'bếp' in amenity %}
                                                <i class="bi bi-fire me-2 text-primary"></i>
                                            {% elif 'liền thông' in amenity %}
                                                <i class="bi bi-door-open-fill me-2 text-primary"></i>
                                            {% elif 'sưởi' in amenity %}
                                                <i class="bi bi-thermometer-high me-2 text-primary"></i>
                                            {% elif 'cắm' in amenity %}
                                                <i class="bi bi-plug me-2 text-primary"></i>
                                            {% endif %}
                                            <span>{{ amenity }}</span>
                                        </div>
                                    </div>
                                {% endif %}
                            {% endfor %}
                        </div>
                    </div>

                    <!-- Tiện nghi độc đáo -->
                    <div class="mb-3">
                        <h6 class="mb-2 d-flex align-items-center border-bottom pb-2">
                            <i class="bi bi-star me-2 text-primary"></i> Tiện nghi độc đáo
                        </h6>
                        <div class="row row-cols-2 g-2">
                            {% for amenity in amenities_list %}
                                {% if ('View đẹp' in amenity or 'Loa bluetooth' in amenity or 'Khu vực giải trí' in amenity 
                                    or 'Bar & Pub' in amenity or 'Chơi golf' in amenity or 'Thể thao trong nhà' in amenity 
                                    or 'Đánh tennis' in amenity or 'Nhà máy rượu vang' in amenity or 'Khu vực mua sắm' in amenity)
                                    and not ('Wifi tốc độ cao' in amenity or 'Netflix' in amenity or 'Điều hòa' in amenity 
                                    or 'Máy pha cà phê' in amenity or 'Dịch vụ lưu trú' in amenity or 'Quầy lễ tân' in amenity 
                                    or 'Dịch vụ giặt ủi' in amenity or 'Bãi đậu xe' in amenity or 'Lễ tân 24h' in amenity 
                                    or 'Có ăn sáng' in amenity or 'Đưa đón sân bay' in amenity or 'Nhận phòng sớm' in amenity)
                                    and not ('Máy sấy tóc' in amenity or 'Phòng gia đình' in amenity or 'Khu vực hút thuốc' in amenity 
                                    or 'Tủ lạnh' in amenity or 'Bồn tắm' in amenity or 'Nhà bếp' in amenity 
                                    or 'Phòng liền thông' in amenity or 'Máy sưởi' in amenity or 'Ổ cắm' in amenity) %}
                                    <div class="col">
                                        <div class="d-flex align-items-center">
                                            {% if 'View' in amenity %}
                                                <i class="bi bi-view-stacked me-2 text-primary"></i>
                                            {% elif 'Loa' in amenity %}
                                                <i class="bi bi-music-note-beamed me-2 text-primary"></i>
                                            {% elif 'giải trí' in amenity %}
                                                <i class="bi bi-controller me-2 text-primary"></i>
                                            {% elif 'Bar' in amenity %}
                                                <i class="bi bi-cup-straw me-2 text-primary"></i>
                                            {% elif 'golf' in amenity %}
                                                <i class="bi bi-bullseye me-2 text-primary"></i>
                                            {% elif 'thể thao' in amenity %}
                                                <i class="bi bi-activity me-2 text-primary"></i>
                                            {% elif 'tennis' in amenity %}
                                                <i class="bi bi-circle me-2 text-primary"></i>
                                            {% elif 'rượu' in amenity %}
                                                <i class="bi bi-wine-glass me-2 text-primary"></i>
                                            {% elif 'mua sắm' in amenity %}
                                                <i class="bi bi-bag me-2 text-primary"></i>
                                            {% endif %}
                                            <span>{{ amenity }}</span>
                                        </div>
                                    </div>
                                {% endif %}
                            {% endfor %}
                        </div>
                    </div>
                {% endif %}
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}